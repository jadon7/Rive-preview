(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8534:function(e,t,n){Promise.resolve().then(n.bind(n,2610))},2610:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ew}});var l,a,r,i,s=n(7437),o=n(2265),c=n(7933),d=n(1994),u=n(3335);function f(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,u.m6)((0,d.W)(t))}let m=o.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,s.jsx)("div",{ref:t,className:f("rounded-lg border bg-card text-card-foreground shadow-sm",n),...l})});m.displayName="Card";let p=o.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,s.jsx)("div",{ref:t,className:f("flex flex-col space-y-1.5 p-6",n),...l})});p.displayName="CardHeader";let h=o.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,s.jsx)("h3",{ref:t,className:f("text-2xl font-semibold leading-none tracking-tight",n),...l})});h.displayName="CardTitle";let g=o.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,s.jsx)("p",{ref:t,className:f("text-sm text-muted-foreground",n),...l})});g.displayName="CardDescription";let x=o.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,s.jsx)("div",{ref:t,className:f("p-6 pt-0",n),...l})});x.displayName="CardContent",o.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,s.jsx)("div",{ref:t,className:f("flex items-center p-6 pt-0",n),...l})}).displayName="CardFooter";var v=n(9707);let w=v.fC,y=o.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,s.jsx)(v.aV,{ref:t,className:f("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...l})});y.displayName=v.aV.displayName;let b=o.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,s.jsx)(v.xz,{ref:t,className:f("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...l})});b.displayName=v.xz.displayName;let j=o.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,s.jsx)(v.VY,{ref:t,className:f("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...l})});j.displayName=v.VY.displayName;var N=n(7864),C=n(875),k=n(2135),M=n(401);let D=N.fC,R=N.ZA,B=N.B4,S=o.forwardRef((e,t)=>{let{className:n,children:l,...a}=e;return(0,s.jsxs)(N.xz,{ref:t,className:f("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...a,children:[l,(0,s.jsx)(N.JO,{asChild:!0,children:(0,s.jsx)(C.Z,{className:"h-4 w-4 opacity-50"})})]})});S.displayName=N.xz.displayName;let T=o.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,s.jsx)(N.u_,{ref:t,className:f("flex cursor-default items-center justify-center py-1",n),...l,children:(0,s.jsx)(k.Z,{className:"h-4 w-4"})})});T.displayName=N.u_.displayName;let E=o.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,s.jsx)(N.$G,{ref:t,className:f("flex cursor-default items-center justify-center py-1",n),...l,children:(0,s.jsx)(C.Z,{className:"h-4 w-4"})})});E.displayName=N.$G.displayName;let I=o.forwardRef((e,t)=>{let{className:n,children:l,position:a="popper",...r}=e;return(0,s.jsx)(N.h_,{children:(0,s.jsxs)(N.VY,{ref:t,className:f("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:a,...r,children:[(0,s.jsx)(T,{}),(0,s.jsx)(N.l_,{className:f("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,s.jsx)(E,{})]})})});I.displayName=N.VY.displayName;let V=o.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,s.jsx)(N.__,{ref:t,className:f("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...l})});V.displayName=N.__.displayName;let z=o.forwardRef((e,t)=>{let{className:n,children:l,...a}=e;return(0,s.jsxs)(N.ck,{ref:t,className:f("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...a,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(N.wU,{children:(0,s.jsx)(M.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(N.eT,{children:l})]})});z.displayName=N.ck.displayName,o.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,s.jsx)(N.Z0,{ref:t,className:f("-mx-1 my-1 h-px bg-muted",n),...l})}).displayName=N.Z0.displayName;var F=n(6394),_=n(7712);let L=(0,_.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),A=o.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,s.jsx)(F.f,{ref:t,className:f(L(),n),...l})});A.displayName=F.f.displayName;var O=n(721);let P=o.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,s.jsx)(O.fC,{className:f("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...l,ref:t,children:(0,s.jsx)(O.bU,{className:f("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});P.displayName=O.fC.displayName;let Z=o.forwardRef((e,t)=>{let{className:n,type:l,...a}=e;return(0,s.jsx)("input",{type:l,className:f("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...a})});Z.displayName="Input";var Y=n(4438),G=n(7689),H=n(7053);let W=(0,_.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",xs:"h-8 rounded-md px-3 text-xs",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),$=o.forwardRef((e,t)=>{let{className:n,variant:l,size:a,asChild:r=!1,...i}=e,o=r?H.g7:"button";return(0,s.jsx)(o,{className:f(W({variant:l,size:a,className:n})),ref:t,...i})});$.displayName="Button";var U=n(5156);let J=o.forwardRef((e,t)=>{let{className:n,orientation:l="horizontal",decorative:a=!0,...r}=e;return(0,s.jsx)(U.f,{ref:t,decorative:a,orientation:l,className:f("shrink-0 bg-border","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",n),...r})});J.displayName=U.f.displayName;var K=n(3786);let q={none:0,string:1,number:2,boolean:3,color:4,list:5,enumType:6,trigger:7,viewModel:8},Q=new Set(["boolean","color","enumType","number","string","trigger"]),X=new Set(["list","viewModel"]),ee=e=>Q.has(e),et=e=>{var t;return"string"==typeof e?e in q?e:void 0:null===(t=Object.entries(q).find(t=>{let[,n]=t;return n===e}))||void 0===t?void 0:t[0]},en=(e,t)=>e?"".concat(e,"/").concat(t):t,el=e=>e?ea(e,""):[],ea=(e,t)=>{var n;return(null!==(n=e.properties)&&void 0!==n?n:[]).flatMap(n=>{var l,a,r,i,s,o;let c=en(t,n.name),d=et(n.type);if(!d)return console.warn("[DataBinding] unsupported property type",n),[];switch(d){case"string":{let t=e.string(n.name);return[{path:c,name:n.name,type:d,value:null!==(l=null==t?void 0:t.value)&&void 0!==l?l:null,targetInstance:e,propertyName:n.name}]}case"number":{let t=e.number(n.name);return[{path:c,name:n.name,type:d,value:null!==(a=null==t?void 0:t.value)&&void 0!==a?a:null,targetInstance:e,propertyName:n.name}]}case"boolean":{let t=e.boolean(n.name);return[{path:c,name:n.name,type:d,value:null!==(r=null==t?void 0:t.value)&&void 0!==r?r:null,targetInstance:e,propertyName:n.name}]}case"color":{let t=e.color(n.name);return[{path:c,name:n.name,type:d,value:null!==(i=null==t?void 0:t.value)&&void 0!==i?i:null,targetInstance:e,propertyName:n.name}]}case"enumType":{let t=e.enum(n.name);return[{path:c,name:n.name,type:d,value:null!==(s=null==t?void 0:t.value)&&void 0!==s?s:null,enumValues:null!==(o=null==t?void 0:t.values)&&void 0!==o?o:[],targetInstance:e,propertyName:n.name}]}case"trigger":return[{path:c,name:n.name,type:d,value:null,targetInstance:e,propertyName:n.name}];case"viewModel":{let t=e.viewModel(n.name);return[{path:c,name:n.name,type:d,children:t?ea(t,c):[]}]}case"list":{let t=e.list(n.name);if(!t)return[{path:c,name:n.name,type:d,children:[]}];return[{path:c,name:n.name,type:d,children:er(t,c)}]}default:return[]}})},er=(e,t)=>{var n,l;let a=[],r=null!==(n=e.length)&&void 0!==n?n:0;for(let n=0;n<r;n+=1){let r=e.instanceAt(n);if(!r)continue;let i="".concat(t,"[").concat(n,"]");a.push({path:i,name:"".concat(null!==(l=t.split("/").pop())&&void 0!==l?l:"item","[").concat(n,"]"),type:"viewModel",children:ea(r,i)})}return a},ei=(e,t)=>{if(!e)return()=>void 0;let n=[],l=(e,a)=>{var r;(null!==(r=e.properties)&&void 0!==r?r:[]).forEach(r=>{let i=en(a,r.name),s=et(r.type);if(!s){console.warn("[DataBinding] skip watch: unsupported type",r);return}if(Q.has(s)){let l=es(e,r.name,s);if(!l)return;let a=()=>{t({path:i,type:s,value:eo(s,l)})};l.on(a),n.push(()=>l.off(a));return}if(X.has(s)){if("viewModel"===s){let t=e.viewModel(r.name);t&&l(t,i)}else if("list"===s){let t=e.list(r.name);if(t){var o;let e=null!==(o=t.length)&&void 0!==o?o:0;for(let n=0;n<e;n+=1){let e=t.instanceAt(n);e&&l(e,"".concat(i,"[").concat(n,"]"))}}}}})};return l(e,""),()=>{n.forEach(e=>e())}},es=(e,t,n)=>{switch(n){case"string":return e.string(t);case"number":return e.number(t);case"boolean":return e.boolean(t);case"color":return e.color(t);case"enumType":return e.enum(t);case"trigger":return e.trigger(t);default:return null}},eo=(e,t)=>{var n,l,a;if(!t)return null;switch(e){case"string":case"enumType":return null!==(n=null==t?void 0:t.value)&&void 0!==n?n:null;case"number":case"color":return null!==(l=null==t?void 0:t.value)&&void 0!==l?l:null;case"boolean":return null!==(a=null==t?void 0:t.value)&&void 0!==a?a:null;case"trigger":return Date.now();default:return null}},ec=(e,t)=>{let n=ed(e,t);return null!=n?n:e},ed=(e,t)=>{let n=!1,l=e.map(e=>{let l=eu(e,t);return l!==e&&(n=!0),l});return n?l:null},eu=(e,t)=>{if(e.path===t.path)return e.value===t.value?e:{...e,value:t.value};if(e.children&&e.children.length>0){let n=ed(e.children,t);if(n)return{...e,children:n}}return e},ef=e=>{if("number"==typeof e)return e;if("string"==typeof e&&e.trim().length>0){let t=Number(e);if(!Number.isNaN(t))return t}return null},em=(e,t)=>{let{targetInstance:n,propertyName:l,type:a}=e;if(!n||!l)return console.warn("[DataBinding] missing target instance for node",e.path),!1;let r=es(n,l,a);if(!r)return console.warn("[DataBinding] unable to resolve accessor",e.path,a),!1;switch(a){case"string":return r.value="string"==typeof t?t:"",!0;case"enumType":if("string"==typeof t)return r.value=t,!0;return!1;case"number":{let e=ef(t);if(null===e)return!1;return r.value=e,!0}case"color":{let e=ef(t);if(null===e)return!1;return r.value=e,!0}case"boolean":return r.value=!!t,!0;case"trigger":return r.trigger(),!0;default:return!1}},ep=e=>{if("number"==typeof e){let t=16777215&e;return"#".concat(t.toString(16).padStart(6,"0"))}return"string"==typeof e&&/^#([0-9a-f]{6}|[0-9a-f]{3})$/i.test(e)?4===e.length?"#".concat(e[1]).concat(e[1]).concat(e[2]).concat(e[2]).concat(e[3]).concat(e[3]):e.toLowerCase():"#000000"},eh=e=>{let t=e.replace("#","").toLowerCase();return(3===t.length&&(t=t.split("").map(e=>e+e).join("")),6===t.length)?parseInt("ff".concat(t),16):8===t.length?parseInt(t,16):null},eg=["Cover","Contain","Fill","FitWidth","FitHeight","None","ScaleDown"],ex={Cover:"填满（可裁剪） ",Contain:"完整",Fill:"拉伸",FitWidth:"适应宽度",FitHeight:"适应高度",None:"无",ScaleDown:"按需缩小"},ev=["TopLeft","TopCenter","TopRight","CenterLeft","Center","CenterRight","BottomLeft","BottomCenter","BottomRight"];function ew(){let e=(0,o.useRef)(null),t=(0,o.useRef)(null),n=(0,o.useRef)(null),l=(0,o.useRef)(null),a=(0,o.useRef)([]),[r,i]=(0,o.useState)({current:0,hovering:!1}),[d,u]=(0,o.useState)(null),[f,v]=(0,o.useState)(null),[N,C]=(0,o.useState)(null),[k,M]=(0,o.useState)(null),[T,E]=(0,o.useState)(null),[F,_]=(0,o.useState)([]),[L,O]=(0,o.useState)(!0),[H,W]=(0,o.useState)({active:"state-machines"}),[U,q]=(0,o.useState)({width:0,height:0}),[Q,X]=(0,o.useState)("black"),[et,en]=(0,o.useState)({alignment:ev.indexOf("Center"),fit:eg.indexOf("Contain")}),[ea,er]=(0,o.useState)([]),[es,eo]=(0,o.useState)([]),[ed,eu]=(0,o.useState)(null),[ef,ew]=(0,o.useState)(""),ey=(0,o.useCallback)(()=>{var e,t;if(null===(e=l.current)||void 0===e||e.call(l),l.current=null,!N){console.warn("[DataBinding] refresh skipped: riveAnimation missing"),er([]);return}let n=N.viewModelInstance;if(!n){console.warn("[DataBinding] refresh skipped: viewModelInstance missing"),er([]);return}let a=el(n);0===a.length&&console.warn("[DataBinding] bound view model has no exposed properties",{properties:null===(t=n.properties)||void 0===t?void 0:t.map(e=>({name:e.name,type:e.type})),selectedViewModel:ed}),console.log("[DataBinding] binding tree rebuilt",{nodes:a.length}),er(a),l.current=ei(n,e=>{er(t=>ec(t,e))})},[N,ed]);(0,o.useEffect)(()=>{a.current=ea},[ea]),(0,o.useEffect)(()=>()=>{var e;null===(e=l.current)||void 0===e||e.call(l),l.current=null},[]),(0,o.useEffect)(()=>{N&&(N.layout=new c.Layout({fit:eZ(et),alignment:eY(et)}))},[et,N]),(0,o.useEffect)(()=>{e.current&&U&&N&&(e.current.width=U.width,e.current.height=U.height,N.resizeToCanvas())},[U,N]);let eb=(0,o.useCallback)(()=>{var e,n;let l=null!==(n=null===(e=t.current)||void 0===e?void 0:e.getBoundingClientRect())&&void 0!==n?n:new DOMRect(0,0,0,0);q(e=>l.width===e.width&&l.height===e.height?e:{width:l.width,height:l.height})},[]);(0,o.useEffect)(()=>(eb(),window.addEventListener("resize",eb),()=>window.removeEventListener("resize",eb)),[eb]);let ej=()=>{let e=null==k?void 0:k.active;e&&(L||null==N||N.play(e),L&&(null==N||N.pause(e)))},eN=async t=>{if(t){i({current:1});try{if(N){await N.load({buffer:t,autoplay:!1,autoBind:!0});return}let n=new c.Rive({buffer:t,canvas:e.current,autoplay:!1,autoBind:!0,stateMachines:"state-machines",layout:new c.Layout({fit:eZ(et),alignment:eY(et)}),onLoad:()=>{i({current:2}),setTimeout(()=>{let e=n.stateMachineNames;if(e&&e.length>0){let t=e[0],l=n.stateMachineInputs(t);l&&(_(l),console.log("[StateMachine] active inputs",l),console.log("Initial state machine inputs:",l),n.play(t))}},0)}});C(n)}catch(e){console.error("Rive loading error:",e),i({current:3,error:0})}}},eC=async e=>{u(e.name),v(ek(e.size));let t=new FileReader;t.onload=async()=>{await eN(t.result)},t.readAsArrayBuffer(e),(0,K.sendGAEvent)("event","upload",{filename:e.name,fileSize:e.size})},ek=e=>e<1024?e+" bytes":e<1048576?(e/1024).toFixed(1)+" KB":(e/1048576).toFixed(1)+" MB",eM=(0,o.useCallback)(()=>{let t=e.current;if(!t)return;null==N||N.stop();let n=t.getContext("2d",{alpha:!1});n&&n.clearRect(0,0,t.width,t.height)},[N]),eD=(0,o.useCallback)(()=>{var e;O(!0),u(null),C(null),M(null),E(null),i(e=>({...e,current:0})),null===(e=l.current)||void 0===e||e.call(l),l.current=null,er([]),a.current=[],eM()},[eM]),eR=(0,o.useCallback)(e=>{N&&(eM(),M(t=>t?(N.stop(t.active),N.play(e),{...t,active:e}):t))},[eM,N]),eB=(0,o.useCallback)(e=>{if(!N||!e)return console.warn("[DataBinding] bind aborted - missing riveAnimation or name"),!1;let t=N.viewModelByName(e);if(!t)return console.warn("[DataBinding] viewModel not found",e),!1;let n=t.defaultInstance();return n?(N.bindViewModelInstance(n),eu(e),ey(),console.log("[DataBinding] bound viewModel",e),!0):(console.warn("[DataBinding] default instance missing for viewModel",e),!1)},[ey,N]),eS=(0,o.useCallback)(()=>{var e;if(!N)return console.warn("[DataBinding] bind default aborted - missing riveAnimation"),!1;let t=N.defaultViewModel();if(!t)return console.warn("[DataBinding] no default ViewModel defined in file"),!1;let n=t.defaultInstance();return n?(N.bindViewModelInstance(n),eu(null!==(e=t.name)&&void 0!==e?e:"Default"),ey(),console.log("[DataBinding] bound default ViewModel",t.name),!0):(console.warn("[DataBinding] default ViewModel lacks default instance"),!1)},[ey,N]),eT=(0,o.useCallback)(e=>{if(!N)return;E(t=>t?{...t,active:e}:t),N.stop(),N.play(e);let t=N.stateMachineInputs(e);t&&(_(t),console.log("New state machine inputs:",t)),ed?eB(ed):eS()},[eS,eB,N,ed]),eE=(0,o.useCallback)(e=>{("animations"===e||"state-machines"===e)&&(W(t=>({...t,active:"animations"===e?"animations":"state-machines"})),"animations"===e&&k?eR(k.active):"state-machines"===e&&T&&eT(T.active))},[k,eR,eT,T]),eI=(0,o.useCallback)(()=>{let e=null==N?void 0:N.animationNames;e&&M({animations:e,active:e[0]})},[N]),eV=(0,o.useCallback)(()=>{let e=null==N?void 0:N.stateMachineNames;if(!e||0===e.length)return;let t=e[0];E({stateMachines:e,active:t}),N&&(N.stop(),N.play(t),_(N.stateMachineInputs(t)))},[N]),ez=(0,o.useCallback)(()=>{if(!N){eo([]),eu(null);return}let e=[],t=N.contents,n=N.defaultViewModel();if(n){var l;e.push(null!==(l=n.name)&&void 0!==l?l:"Default")}if(eo(e),console.log("[DataBinding] detected view models",e,t),!N.viewModelInstance){e.length>0?eB(e[0]):eS();return}eu(t=>{var n;return t&&e.includes(t)?t:null!==(n=e[0])&&void 0!==n?n:null})},[eS,eB,N]),eF=(0,o.useCallback)((e,t)=>{if(!N||!N.viewModelInstance)return;if(!e.targetInstance||!e.propertyName){console.warn("[DataBinding] node missing target",e);return}if("trigger"===e.type){em(e,null)?(er(t=>ec(t,{path:e.path,type:e.type,value:Date.now()})),console.log("[DataBinding] trigger fired",{path:e.path})):console.warn("[DataBinding] trigger failed",{path:e.path});return}let n=t;if("color"===e.type&&"string"==typeof t){let e=eh(t);if(null===e){console.warn("[DataBinding] invalid color hex",t);return}n=e}else if("number"===e.type&&"string"==typeof t){let e=Number(t);if(Number.isNaN(e)){console.warn("[DataBinding] invalid number input",t);return}n=e}em(e,n)?(er(t=>ec(t,{path:e.path,type:e.type,value:n})),console.log("[DataBinding] value updated",{path:e.path,type:e.type,value:n})):console.warn("[DataBinding] failed to update value",{path:e.path,type:e.type,rawValue:t})},[N]),e_=e=>{var t,n;switch(e.type){case"string":return(0,s.jsx)(Z,{className:"w-40",value:"string"==typeof e.value?e.value:"",onChange:t=>eF(e,t.target.value)});case"number":return(0,s.jsx)(Z,{className:"w-32",type:"number",value:"number"==typeof e.value?String(e.value):"",onChange:t=>eF(e,t.target.value)});case"boolean":return(0,s.jsx)(P,{checked:!!e.value,onCheckedChange:t=>eF(e,t)});case"color":return(0,s.jsx)(Z,{type:"color",className:"w-16 h-8 p-1",value:ep(null!==(t=e.value)&&void 0!==t?t:null),onChange:t=>eF(e,t.target.value)});case"enumType":return(0,s.jsxs)(D,{value:"string"==typeof e.value?e.value:void 0,onValueChange:t=>eF(e,t),children:[(0,s.jsx)(S,{className:"w-40",children:(0,s.jsx)(B,{placeholder:"选择值"})}),(0,s.jsx)(I,{children:null===(n=e.enumValues)||void 0===n?void 0:n.map(e=>(0,s.jsx)(z,{value:e,children:e},e))})]});case"trigger":return(0,s.jsx)($,{size:"xs",variant:"outline",onClick:()=>eF(e,null),children:"触发"});default:return null}},eL=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.map(e=>{let n=e.children&&e.children.length>0,l=ee(e.type);return(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex w-full items-center gap-2",style:{paddingLeft:"".concat(12*t,"px")},children:[(0,s.jsx)("div",{className:"flex-1 min-w-0",children:(0,s.jsx)("p",{className:"text-sm font-medium truncate break-all",title:e.path,children:e.name})}),l?e_(e):(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"分组"})]}),n&&(0,s.jsx)("div",{className:"flex flex-col gap-2",children:eL(e.children,t+1)})]},e.path)})},eA=(0,o.useCallback)(()=>{if(eV(),eI(),i({current:2,error:null}),eE("state-machines"),ey(),ez(),N){let e=N.stateMachineNames;if(e&&e.length>0){let t=e[0];N.stop(),N.play(t);let n=N.stateMachineInputs(t);n&&(_(n),console.log("State machine inputs:",n))}}},[eI,eV,ey,N,eE,ez]);(0,o.useEffect)(()=>{if(!N)return;let e=()=>{i({current:3,error:0})},t=()=>O(!0),n=()=>O(!1),l=()=>O(!1);return N.on(c.EventType.Load,eA),N.on(c.EventType.LoadError,e),N.on(c.EventType.Play,t),N.on(c.EventType.Pause,n),N.on(c.EventType.Stop,l),()=>{N.off(c.EventType.Load,eA),N.off(c.EventType.LoadError,e),N.off(c.EventType.Play,t),N.off(c.EventType.Pause,n),N.off(c.EventType.Stop,l)}},[N,eA]),(0,o.useEffect)(()=>{3===r.current&&null!==r.error?(eD(),eJ()):(2!==r.current||k||eI(),2!==r.current||T||eV())},[r,k,eI,eV,eD,T]);let eO=(0,o.useRef)(null),eP=(0,o.useRef)(null);(0,o.useEffect)(()=>{eO.current=null,eP.current=null},[d]),(0,o.useEffect)(()=>{if("state-machines"===H.active&&T){let e=T.active;eO.current!==e&&(eO.current=e,eT(e))}else if("animations"===H.active&&k){let e=k.active;eP.current!==e&&(eP.current=e,eR(e))}},[k,H.active,eR,eT,T]);let eZ=e=>c.Fit[eg[e.fit]],eY=e=>c.Alignment[ev[e.alignment]],eG=e=>{i({...r,hovering:!0}),e.preventDefault(),e.stopPropagation()},eH=e=>{i({...r,hovering:!1}),e.preventDefault(),e.stopPropagation()},eW=e=>{i({...r,hovering:!0}),e.dataTransfer.dropEffect="copy",e.preventDefault(),e.stopPropagation()},e$=e=>{i({...r,hovering:!1}),eC(e.dataTransfer.files[0]),e.preventDefault(),e.stopPropagation()},eU=()=>[2,1].includes(r.current),eJ=()=>{Y.Am.error("Your file has no animations.")};return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("main",{className:"flex-1",children:[(0,s.jsx)(Y.x7,{richColors:!0,visibleToasts:10}),(0,s.jsxs)("div",{id:"container",className:"px-8 max-w-[1400px] mx-auto",children:[(0,s.jsx)("div",{className:"relative flex w-full flex-col items-start",children:(0,s.jsxs)("section",{className:"mx-auto flex flex-col items-start gap-2 px-4 py-8 md:py-12 md:pb-8 lg:py-12 lg::pb-10 w-full",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold leading-tight tracking-tighter md:text-4xl lg:leading-[1.1] hidden md:block",children:"Rive 效果预览"}),(0,s.jsx)("h1",{className:"text-3xl font-bold leading-tight tracking-tighter md:text-4xl lg:leading-[1.1] md:hidden",children:"Rive 运行时"}),(0,s.jsx)("p",{className:"max-w-2xl text-lg font-light text-foreground",children:"测试动画和状态机的交互效果"})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-[1fr_300px] gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)(m,{children:[(0,s.jsxs)(p,{children:[(0,s.jsx)(h,{children:"预览"}),(0,s.jsx)(g,{children:d?(0,s.jsxs)("span",{children:[d,(0,s.jsx)("span",{className:"inline-block min-w-2",children:"\xa0"}),(0,s.jsxs)("span",{className:"text-muted-foreground",children:["(",f,")"]})]}):"选择文件开始预览"})]}),(0,s.jsx)(x,{children:(0,s.jsxs)("div",{ref:t,className:"relative w-full h-[600px] rounded-lg overflow-hidden",onDrop:e=>e$(e),onDragOver:e=>eW(e),onDragEnter:e=>eG(e),onDragLeave:e=>eH(e),children:[(0,s.jsx)("canvas",{ref:e,style:{display:eU()?"block":"none"},className:"".concat("white"===Q?"bg-white":"black"===Q?"bg-black":"")}),(0,s.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-4",style:{display:eU()?"none":"flex"},children:[(0,s.jsx)(G.Z,{className:"w-8 h-8"}),"拖拽一个 Rive 文件或",(0,s.jsx)($,{onClick:()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.click()},children:"浏览"}),(0,s.jsx)("input",{hidden:!0,type:"file",accept:".riv",ref:n,onChange:e=>{let t=e.target.files;t&&eC(t[0])}})]})]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)(m,{className:"w-full overflow-x-hidden",children:[(0,s.jsxs)(p,{children:[(0,s.jsx)(h,{children:"外观"}),(0,s.jsx)(g,{children:"自定义显示效果"})]}),(0,s.jsx)(x,{children:(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("h2",{className:"text-lg font-medium mb-2",children:"背景颜色"}),(0,s.jsxs)(D,{value:Q,onValueChange:e=>X(e),children:[(0,s.jsx)(S,{className:"w-full",children:(0,s.jsx)(B,{placeholder:"选择背景"})}),(0,s.jsx)(I,{children:(0,s.jsxs)(R,{children:[(0,s.jsx)(V,{children:"可用背景"}),(0,s.jsx)(z,{value:"white",children:"白色"}),(0,s.jsx)(z,{value:"black",children:"黑色"})]})})]})]})})]}),(0,s.jsxs)(m,{className:"w-full overflow-x-hidden",children:[(0,s.jsxs)(p,{children:[(0,s.jsx)(h,{children:"布局"}),(0,s.jsx)(g,{children:"调整动画布局"})]}),(0,s.jsx)(x,{children:(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("div",{className:"flex flex-row flex-wrap justify-between items-center gap-2 mb-2",children:[(0,s.jsx)("h2",{className:"text-lg font-medium pr-8",children:"适配方式"}),(0,s.jsx)("div",{className:"w-auto min-w-40",children:(0,s.jsxs)(D,{value:eg[et.fit],onValueChange:e=>en({...et,fit:eg.indexOf(e)}),children:[(0,s.jsx)(S,{className:"w-full",children:(0,s.jsx)(B,{placeholder:"Select Fit"})}),(0,s.jsx)(I,{children:(0,s.jsxs)(R,{children:[(0,s.jsx)(V,{children:"可用适配方式"}),eg.map(e=>(0,s.jsx)(z,{value:e,children:ex[e]||e},e))]})})]})})]}),(0,s.jsxs)("div",{className:"flex flex-row justify-between flex-wrap",children:[(0,s.jsx)("h2",{className:"text-lg font-medium mt-4 pr-8",children:"对齐方式"}),(0,s.jsx)("div",{className:"grid grid-rows-[36px_36px_36px] grid-cols-[36px_36px_36px] gap-2 mt-4 mb-2",children:ev.map((e,t)=>(0,s.jsx)("button",{onClick:()=>en({...et,alignment:t}),className:"w-[36px] h-[36px] ".concat(et.alignment===t?"bg-foreground":"bg-muted"," hover:bg-secondary-foreground rounded-lg transition-colors")},"btn_".concat(t)))})]})]})})]})]})]}),(0,s.jsxs)(m,{children:[(0,s.jsxs)(p,{children:[(0,s.jsx)(h,{children:"控制面板"}),(0,s.jsx)(g,{children:"数据源和触发器"})]}),(0,s.jsxs)(x,{className:"grid gap-4",children:[(0,s.jsxs)(w,{value:H.active,className:"w-full flex flex-col items-center",onValueChange:e=>eE(e),children:[(0,s.jsxs)(y,{className:"grid w-full grid-cols-2 mb-2",children:[(0,s.jsx)(b,{value:"animations",children:"动画"}),(0,s.jsx)(b,{value:"state-machines",children:"状态机"})]}),(0,s.jsx)(j,{value:"animations",className:"w-full",children:(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)("ul",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 w-full",children:null==k?void 0:k.animations.map((e,t)=>(0,s.jsx)("li",{className:"w-full",children:(0,s.jsx)($,{variant:k.active===e?"default":"outline",onClick:()=>eR(e),className:"w-full",size:"xs",children:e})},t))})})}),(0,s.jsxs)(j,{value:"state-machines",className:"w-full",children:[(0,s.jsxs)(D,{value:null==T?void 0:T.active,onValueChange:e=>eT(e),children:[(0,s.jsx)(S,{className:"w-full",children:(0,s.jsx)(B,{placeholder:"选择状态机"})}),(0,s.jsx)(I,{children:(0,s.jsxs)(R,{children:[(0,s.jsx)(V,{children:"可用状态机"}),null==T?void 0:T.stateMachines.map(e=>(0,s.jsx)(z,{value:e,children:e},e))]})})]}),(0,s.jsxs)("div",{className:"w-full mt-2",children:[(null==F?void 0:F.some(e=>e.type===c.StateMachineInputType.Number))&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{className:"text-lg font-medium mb-2",children:"Input"}),(0,s.jsx)("ul",{className:"flex flex-col gap-2 w-full",children:null==F?void 0:F.filter(e=>e.type===c.StateMachineInputType.Number).map((e,t)=>(0,s.jsx)("li",{className:"w-full",children:(0,s.jsxs)("div",{className:"w-full max-w-sm",children:[(0,s.jsx)(A,{htmlFor:e.name,children:e.name}),(0,s.jsx)(Z,{type:"number",id:e.name,placeholder:"",onChange:t=>{let n=parseFloat(t.target.value);console.log("Number input: ",e.name," New value: ",n),e.value=n,console.log(e)}})]})},t))})]}),(null==F?void 0:F.some(e=>e.type===c.StateMachineInputType.Trigger))&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{className:"text-lg font-medium mt-4 mb-2",children:"触发器"}),(0,s.jsx)("ul",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 w-full",children:null==F?void 0:F.filter(e=>e.type===c.StateMachineInputType.Trigger).map((e,t)=>(0,s.jsx)("li",{className:"w-full",children:(0,s.jsx)($,{variant:"default",onClick:()=>{console.log("input: ",e),e.fire()},className:"w-full",size:"xs",children:e.name})},t))})]}),(null==F?void 0:F.some(e=>e.type===c.StateMachineInputType.Boolean))&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{className:"text-lg font-medium mt-4 mb-2",children:"布尔值"}),(0,s.jsx)("ul",{className:"flex flex-col gap-2 w-full",children:null==F?void 0:F.filter(e=>e.type===c.StateMachineInputType.Boolean).map((e,t)=>(0,s.jsx)("li",{className:"w-full",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(P,{id:e.name,onCheckedChange:t=>{console.log("Boolean input: ",e.name," New value: ",t),e.value=t}}),(0,s.jsx)(A,{htmlFor:e.name,children:e.name})]})},t))})]})]}),ea.length>0&&(0,s.jsxs)("div",{className:"w-full mt-4 flex flex-col gap-2",children:[(0,s.jsx)(J,{className:"my-2"}),(0,s.jsx)("div",{className:"flex flex-col w-full gap-1",children:(0,s.jsx)("h4",{className:"text-lg font-medium mb-2",children:"Data Binding"})}),(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)(A,{className:"text-xs text-muted-foreground",children:"ViewModel"}),es.length>0?(0,s.jsxs)(D,{value:null!=ed?ed:es[0],onValueChange:e=>eB(e),children:[(0,s.jsx)(S,{className:"w-full",children:(0,s.jsx)(B,{placeholder:"选择 ViewModel"})}),(0,s.jsx)(I,{children:es.map(e=>(0,s.jsx)(z,{value:e,children:e},e))})]}):(0,s.jsxs)("div",{className:"flex gap-2 w-full",children:[(0,s.jsx)(Z,{placeholder:"输入 ViewModel 名称",value:ef,onChange:e=>ew(e.target.value)}),(0,s.jsx)($,{type:"button",onClick:()=>eB(ef.trim()),disabled:!ef.trim(),children:"绑定"})]}),0===es.length&&(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"文件未提供默认 ViewModel，请在 Rive 中设置 Default Instance 后再试。"})]}),(0,s.jsx)("div",{className:"flex flex-col w-full gap-3 -mr-6",children:eL(ea)})]})]})]}),"animations"===H.active&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(J,{orientation:"horizontal"}),(0,s.jsx)($,{onClick:()=>{ej()},disabled:2!==r.current,variant:"secondary",children:2!==r.current?"播放/暂停":L?"暂停":"播放"})]})]})]})]})]})]})})}(l=r||(r={}))[l.Idle=0]="Idle",l[l.Loading=1]="Loading",l[l.Active=2]="Active",l[l.Error=3]="Error",(a=i||(i={}))[a.NoAnimation=0]="NoAnimation"}},function(e){e.O(0,[620,606,718,971,117,744],function(){return e(e.s=8534)}),_N_E=e.O()}]);